<%- include('../../partials/master/create/_head') %>

    <main class="flex-grow-1 p-4 bg-white">
        <div class="d-flex justify-content-between align-items-center mb-4 border-bottom pb-2">
            <h1 class="text-primary fs-4 fw-normal m-0">Edit Object</h1>
            <div>
                <a href="/master/object" class="btn btn-secondary me-2">
                    <i class="fas fa-arrow-left me-1"></i> Back
                </a>
            </div>
        </div>

        <section class="form-section">
            <div class="form-header">
                <i class="fas fa-edit me-2"></i> Edit Object Information
            </div>
            <div class="form-body">
                <form action="/master/object/update/<%= object.id %>" method="post" enctype="multipart/form-data">
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="namaBuah" class="form-label required-field">Object Name</label>
                                <input name="object" type="text" class="form-control" id="namaBuah"
                                    value="<%= object.object %>" placeholder="Enter object name" required />
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="rasa" class="form-label required-field">Category</label>
                                <select name="id_cat" class="form-select" id="rasa" required>
                                    <option value="" disabled>Select category</option>
                                    <% for(var i=0; i < categories.length; i++) { %>
                                        <option value="<%= categories[i].id_cat %>"
                                            <%=categories[i].id_cat===object.id_cat ? 'selected' : '' %>>
                                            <%= categories[i].nama %>
                                        </option>
                                        <% } %>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="row mb-4">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="gambar" class="form-label">Gambar</label>
                                <input name="img" type="file" class="form-control" id="gambar" accept="image/*" />
                                <% if (object.img) { %>
                                    <div class="mt-2">
                                        <img src="/images/<%= object.img %>" alt="Current Image" width="150" />
                                    </div>
                                    <% } %>
                                        <small class="text-muted">Max file size: 2MB</small>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="audio" class="form-label">Audio</label>
                                <input name="audio" type="file" class="form-control" id="audio" accept="audio/*" />
                                <% if (object.audio) { %>
                                    <div class="mt-2">
                                        <audio controls>
                                            <source src="/audio/<%= object.audio %>" type="audio/mpeg" />
                                            Your browser does not support the audio element.
                                        </audio>
                                    </div>
                                    <% } %>
                                        <small class="text-muted">Max file size: 2MB</small>
                            </div>
                        </div>
                    </div>

                    <div class="d-flex justify-content-end gap-2 mt-4">
                        <a href="/master/object" class="btn btn-secondary">
                            <i class="fas fa-times me-1"></i> Cancel
                        </a>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save me-1"></i> Update
                        </button>
                    </div>
                </form>
            </div>
        </section>
    </main>

    <%- include('../../partials/master/create/_foot') %>